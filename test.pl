use Modern::Perl;
use Test::More;
use IPC::Open3;
use Data::Dumper;

my @testcases = (
    {
        in => '01 12 31 32',
        out => [
            "12 23 31",
            "23 31 12",
            "31 12 23",
            "32 21 13",
            "21 13 32",
            "13 32 21",
        ],
    },
    {
        in => '01 12 34 30 42',
        out => [
            "21 10 03 34 42",
            "01 12 24 43 30",
            "12 24 43 30 01",
            "42 21 10 03 34",
            "34 42 21 10 03",
            "03 34 42 21 10",
            "30 01 12 24 43",
            "24 43 30 01 12",
            "10 03 34 42 21",
            "43 30 01 12 24",
        ],
    },
    {
        in => '01 12 23 34 45 55',
        out => [
            "55",
        ],
    },
    {
        in => '55 54 53 52 51 50',
        out => [
            "55",
        ],
    },
    {
        in => '35 65 55 54 51',
        out => [
            "55",
        ],
    },
    {
        in => '01 12 23 34 45 56',
        out => [
            "0",
        ],
    },
    {
        in => '01 44 20 26 64 42',
        out => [
            "26 64 44 42",
            "64 44 42 26",
            "44 42 26 64",
            "42 26 64 44",
            "62 24 44 46",
            "24 44 46 62",
            "44 46 62 24",
            "46 62 24 44",
        ],
    },
    {
        in => '35 10 54 20 12 34',
        out => [
            "35 54 43",
            "54 43 35",
            "43 35 54",
            "53 34 45",
            "34 45 53",
            "53 34 45",
            "20 01 12",
            "01 12 20",
            "12 20 01",
            "02 21 10",
            "21 10 02",
            "02 21 10",
        ],
    },
    {
        in => '00 33',
        out => [
            "00",
            "33"
        ],
    },
    {
        in => '11',
        out => [
            "11",
        ],
    },
    {
        in => '23 11 45',
        out => [
            "11",
        ],
    },
    {
        in => '10',
        out => [
            "0",
        ],
    },{
        in => '00',
        out => [
            "00",
        ],
    },
    {
        in => '10 21',
        out => [
            "0",
        ],
    },
    {
        in => '16 04 04 53 06 26 32 53 53',
        out => [
            "04 40",
            "35 53",
            "40 04",
            "53 35",
        ]
    },
    {
        in => '55 40 54 46 20 16 60 20 31',
        out => [
            "02 20 04 46 60",
            "02 20 06 64 40",
            "04 46 60 02 20",
            "06 64 40 02 20",
            "20 04 46 60 02",
            "20 06 64 40 02",
            "40 02 20 06 64",
            "46 60 02 20 04",
            "60 02 20 04 46",
            "64 40 02 20 06",
        ]
    },
    {
        in => '55 41 63 13 40 05 24 24 42',
        out => [
            "24 42",
            "42 24",
        ]
    },
    {
        in => '31 30 13 22 26 62 62 60 55 50 13',
        out => [
            "22 26 62",
            "26 62 22",
            "62 22 26",
        ]
    },
    {
        in => '13 34 45 15',
        out => [
            "13 34 45 51",
            "15 54 43 31",
            "31 15 54 43",
            "34 45 51 13",
            "43 31 15 54",
            "45 51 13 34",
            "51 13 34 45",
            "54 43 31 15",
        ]
    },
    {
        in => '01 12 34 30 42',
        out => [
            "01 12 24 43 30",
            "03 34 42 21 10",
            "10 03 34 42 21",
            "12 24 43 30 01",
            "21 10 03 34 42",
            "24 43 30 01 12",
            "30 01 12 24 43",
            "34 42 21 10 03",
            "42 21 10 03 34",
            "43 30 01 12 24",
        ]
    },
    {
        in => '55 00 65 25 00',
        out => [
            "00 00",
        ]
    },
    {
        in => '00 00 00 00 00 00',
        out => [
            "00 00 00 00 00 00",
        ]
    },
);

my ( $in, $out, $err );
foreach my $testcase ( @testcases ) {
    open3( $in, $out, $err, 'perl golf.pl' );
    print $in $testcase->{in};
    close $in;
    my $rout = join('',<$out>);

    chomp $rout;

    ok((grep {$rout eq $_} @{$testcase->{out}}), "input $testcase->{in}");
}

done_testing();